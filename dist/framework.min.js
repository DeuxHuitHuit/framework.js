!function(a){"use strict";var b=function(b,c){try{if(a.isFunction(b))return b.apply(this,c||[])}catch(d){var e=App.debug()&&d.stack,f=(d.message||d)+(e||"");App.log({args:[f,d],fx:"error"})}return null};window.App&&a.isFunction(window.App.debug)?window.App=a.extend(window.App,{callback:b}):window.alert("App-debug is needed for App-callback")}(jQuery),function(a){"use strict";var b=!1,c=function(a){return a===!0||a===!1?b=a:"!"===a&&(b=!b),b},d=[],e=function(c){if(b){if(!c)return this;c.args&&!a.isArray(c.args)&&(c.args=[c.args]);var e={args:c.args||arguments,fx:c.fx||"warn",me:c.me||"App"},f=a.type(e.args[0]);("string"===f||"number"===f||"boolean"==f)&&(e.args[0]="["+e.me+"] "+e.args[0]),window.console&&(a.isFunction(console[e.fx])||(e.fx="log"),window.console[e.fx].apply?window.console[e.fx].apply(window.console,e.args):a.each(e.args,function(a,b){window.console[e.fx](b)})),d.push(e)}return this};window.App=a.extend(window.App,{debug:c,log:e,logs:function(){return d}})}(jQuery),function(a){"use strict";var b="body",c=null,d=null,e="",f={},g={},h=function(b,c){var d=function(){return!0},e=function(a){App.callback(a)},f=function(b){var f=b,g=function(){return f.key},h=function(){return f.routes},i=function(){return!!a(this.key()).length};return a.extend({actions:a.noop,key:g,loaded:i,init:a.noop,enter:e,leave:e,canEnter:d,canLeave:d,routes:h,data:function(){return f}},c)};return f},i=function(a,b,c){var d,e=f[b];return e?!g[a.key]||c?(d=e(a),g[a.key]=d,!0):(App.log({args:["Overwriting page key %s is not allowed",a.key],fx:"error"}),void 0):(App.log({args:["Model %s not found",b],fx:"error"}),!1)},j=function(a,b,c){var d=h(a,b);return f[a]&&!c?(App.log({args:["Overwriting page model key %s is not allowed",a],fx:"error"}),!1):(f[a]=d,!0)},k=function(b,c){var d=-1,e=function(a){return d=a,!1};return b&&c&&a.each(c,function(c){var d,f=this,g=a.type(f);if("regexp"==g){if(f.test(b))return e(c)}else if("string"==g){if(b=decodeURIComponent(b),b=b.split("#")[0],f==b)return e(c);0!==f.indexOf("^")&&(f="^"+f),f.indexOf("^")!==f.length-1&&(f+="$"),f.indexOf("*")&&(f=f.replace(new RegExp("\\*","g"),".*"));try{d=new RegExp(f)}catch(h){App.log({args:["Error while creating RegExp %s.\n%s",f,h],fx:"error"})}if(d&&d.test(b))return e(c)}else if(f===b)return e(c);return!0}),d},l=function(b){var c=null;return v(b)&&a.each(g,function(){var a=this.routes();return~k(b,a)?(c=this,!1):void 0}),c},m={},n=function(){return{actions:a.noop,init:a.noop}},o=function(b){return a.extend(n(),b)},p=function(a,b,c){return g[a]&&!c?App.log({args:["Overwriting module key %s is not allowed",a],fx:"error"}):m[a]=o(b),m[a]},q=!1,r=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),s=function(b,c,d,e){if(b){var f=b[c];if(!a.isFunction(f)&&~c.indexOf(".")){f=b;var g=c.split(".");a.each(g,function(){return f=f[this],a.isPlainObject(f)?void 0:!1})}App.callback(f,[c,d,e])}},t=function(a,b,d){return c&&s(c.actions(),a,b,d),this},u=function(b,c,d){return a.each(m,function(){s(this.actions(),b,c,d)}),this},v=function(a){var b=!1;return a?b=!0:App.log({args:"No route set.",fx:"error"}),b},w=function(){return q&&App.log({args:"Mediator is busy waiting for a page load.",fx:"error"}),!q},x=function(a){var b=!0;return a||(b=!1),b},y=function(a){var b=!0;return a.canEnter()||(App.log("Cannot enter page %s.",a.key()),b=!1),b},z=function(){var a=!1;return c?c.canLeave()?a=!0:App.log("Cannot leave page %s.",c.key()):App.log({args:"No current page set.",fx:"error"}),a},A=function(a,b,c){return t(a,b,c),u(a,b,c),this},B=function(f){var g,h="",i=function(){var a=c,b=function(){d=a,e=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),a=null,u("page.leave",{page:d})},f=function(){c=g,u("page.enter",{page:g,route:h}),q=!1},i={currentPage:c,nextPage:g,leaveCurrent:b,enterNext:f,route:h,isHandled:!1};c=null,u("pages.requestPageTransition",i),i.isHandled||(u("page.leaving",{page:a}),a.leave(b),u("page.entering",{page:g,route:h}),g.enter(f))},j=function(c){var d=a(c).find(g.key());if(d.length){var e=a(b);e.append(d.css({opacity:0})),g.init(),d.hide(),u("pages.loaded",{elem:e,data:c,url:f}),i()}else App.log({args:['Could not find "%s" in xhr data.',g.key()],fx:"error"})};return"string"===a.type(f)?z()&&w()&&(g=l(f),h=f):g=f,x(g)?y(g)&&(g===c?(App.log("next page is the current one"),u("pages.navigateToCurrent",{page:g,route:h})):(q=!0,g.loaded()?i():(u("pages.loading"),Loader.load({url:f,priority:0,vip:!0,success:j,error:function(){u("pages.loaderror")}})))):App.log({args:['Route "%s" was not found.',f],fx:"error"}),this},C=function(a){if(c&&w()){var b=l(a);x(b)&&y(b)&&(b!==c?B(a):B(e))}return this},D=function(e){e&&a(e).length&&(b=e),a.each(m,function(){this.init()}),a.each(g,function(){this.loaded()&&(this.init({firstTime:!0}),~k(r,this.routes())&&(c=this,d=this,u("page.entering",{page:c,route:r}),c.enter(function(){u("page.enter",{page:c,route:r})})))})},E=function(a){return D(a),App};window.App=a.extend(window.App,{root:function(){return b},run:E,mediator:{notify:A,"goto":B,toggle:C},pages:{_matchRoute:k,getPageForRoute:l,page:function(a){var b=g[a];return b||(b=l(a)),b},create:i,exports:j,notify:t},modules:{exports:p,notify:u}})}(jQuery),function(a,b){"use strict";var c=function(){var a=/\+/g,c=/([^&=]+)=?([^&]*)/g,d=function(b){return decodeURIComponent(b.replace(a," "))},e=function(a){var e,f,g={};for(""===a||a||(a=b.location.search),f=a.substring(1);e=c.exec(f);)g[d(e[1])]=d(e[2]);return g};return{parse:e}},d=function(){var a=function(a){return""===a||a||(a=navigator.userAgent),a};return{isIos:function(a){return b.BrowserDetector.isIphone(a)||b.BrowserDetector.isIpad(a)},isIphone:function(b){return b=a(b),!(!b.match(/iPhone/i)&&!b.match(/iPod/i))},isIpad:function(b){return b=a(b),!!b.match(/iPad/i)},isAndroid:function(b){return b=a(b),!!b.match(/Android/i)},isOtherMobile:function(b){return b=a(b),!(!b.match(/mobile/i)&&!b.match(/phone/i))},isMobile:function(a){return b.BrowserDetector.isIos(a)||b.BrowserDetector.isAndroid(a)||b.BrowserDetector.isOtherMobile(a)},isMsie:function(b){return b=a(b),!!b.match(/msie/i)}}};window.QueryStringParser=c(),window.QS=b.QueryStringParser.parse(),window.BrowserDetector=d(),a.iphone=b.BrowserDetector.isIphone(),a.ipad=b.BrowserDetector.isIpad(),a.ios=b.BrowserDetector.isIos(),a.mobile=b.BrowserDetector.isMobile()}(jQuery,window),function(a){"use strict";a.mobile&&a("html").addClass("mobile"),a.easing.def=a.mobile?"linear":"easeOutQuad"}(jQuery),function(a){"use strict";window.console||(window.console={},window.console.log=window.console.warn=window.console.error=window.console.info=window.console.dir=window.console.time=window.console.timeEnd=a.noop)}(jQuery),function(a){"use strict";var b=function(a){return("0"+parseInt(a,10).toString(16)).slice(-2)};window.rgb2hex=function(a){var c=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return c?b(c[1])+b(c[2])+b(c[3]):a},window.pd=function(b,c){return b&&(a.isFunction(b.preventDefault)&&b.preventDefault(),c===!0&&a.isFunction(b.stopPropagation)&&b.stopPropagation()),!1},window.keys={"?":0,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,space_bar:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window_key:91,right_window_key:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,"numpad 4":100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,";":186,"=":187,equal_sign:187,comma:188,",":188,dash:189,".":190,period:190,forward_slash:191,"/":191,grave_accent:192,open_bracket:219,back_slash:220,"\\":220,close_braket:221,single_quote:222},window.keyFromCode=function(b){var c="?";return b?(a.each(window.keys,function(a,d){return b===d?(c=a,!1):!0}),c):c},window.isChar=function(a){return a===window.keys.space_bar||a>window.keys["0"]&&a<=window.keys.z}}(jQuery),function(a){"use strict";var b=[],c=!1,d=null,e=function(a){return!!d&&d===a},f=function(c){var d=-1;return a.each(b,function(a,b){return b.url===c?(d=a,!1):!0}),d},g=function(){b.length?h():c=!1},h=function(){var c=b.shift(),e=a.extend({},c,{success:function(){d=null,g(),App.callback.call(this,c.success,arguments)},error:function(){var a=c.vip?2:1;d=null,App.log({args:["Error loading url %s",c.url],me:"Loader"}),c.priority+=++c.retries,c.retries<=c.maxRetries*a&&j(c),g(),App.callback.call(this,c.error,arguments)}});a.ajax(e),d=e.url},i=function(c,d){a.isPlainObject(c)||(c={url:c}),a.isNumeric(d)&&Math.abs(d)<b.length&&(c.priority=d),(!a.isNumeric(c.priority)||Math.abs(c.priority)>b.length)&&(c.priority=b.length),a.isNumeric(c.retries)||(c.retries=0),a.isNumeric(c.maxRetries)||(c.maxRetries=2)},j=function(a,c){if(!a)return App.log({args:"No url given",me:"Loader"}),this;if(i(a,c),e(a.url))return App.log({args:["Url %s is already loading",a.url],me:"Loader"}),this;var d=f(a.url);if(~d){var g=b[d];g.priority!=a.priority&&(b.splice(d,1),b.splice(a.priority,1,a)),App.log({args:["Url %s was shifted from %s to %s",a.url,g.priority,a.priority],me:"Loader"})}else b.splice(a.priority,1,a),App.log({args:["Url %s has been insert at %s",a.url,a.priority],me:"Loader"});return k(),this},k=function(){c||(c=!0,h(),App.log({args:"Load worker has been started",me:"Loader"}))};window.Loader=a.extend(window.Loader,{load:j,isLoading:e,inQueue:f,working:function(){return c}})}(jQuery);
/*
//@ sourceMappingURL=framework.map
*/