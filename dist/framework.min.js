(function(e,n){"use strict";var r=function(){var e=/\+/g,r=/([^&=]+)=?([^&]*)/g,t=function(n){return decodeURIComponent(n.replace(e," "))},o=function(e){var o,i,a={};for(""===e||e||(e=n.location.search),i=e.substring(1);o=r.exec(i);)a[t(o[1])]=t(o[2]);return a};return{parse:o}},t=function(){var e=function(e){return""===e||e||(e=navigator.userAgent),e};return{isIos:function(e){return n.BrowserDetector.isIphone(e)||n.BrowserDetector.isIpad(e)},isIphone:function(n){return n=e(n),!(!n.match(/iPhone/i)&&!n.match(/iPod/i))},isIpad:function(n){return n=e(n),!!n.match(/iPad/i)},isAndroid:function(n){return n=e(n),!!n.match(/Android/i)},isOtherMobile:function(n){return n=e(n),!(!n.match(/mobile/i)&&!n.match(/phone/i))},isMobile:function(e){return n.BrowserDetector.isIos(e)||n.BrowserDetector.isAndroid(e)||n.BrowserDetector.isOtherMobile(e)},isMsie:function(n){return n=e(n),!!n.match(/msie/i)}}};window.QueryStringParser=r(),window.QS=n.QueryStringParser.parse(),window.BrowserDetector=t(),e.iphone=n.BrowserDetector.isIphone(),e.ipad=n.BrowserDetector.isIpad(),e.ios=n.BrowserDetector.isIos(),e.mobile=n.BrowserDetector.isMobile()})(jQuery,window),function(e){"use strict";e.mobile&&e("html").addClass("mobile"),e.easing.def=e.mobile?"linear":"easeOutQuad"}(jQuery),function(e){"use strict";window.console||(window.console={},window.console.log=window.console.warn=window.console.error=window.console.info=window.console.dir=window.console.time=window.console.timeEnd=e.noop)}(jQuery),function(e){"use strict";var n=function(e){return("0"+parseInt(e,10).toString(16)).slice(-2)};window.rgb2hex=function(e){var r=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return r?n(r[1])+n(r[2])+n(r[3]):e},window.pd=function(n,r){return n&&(e.isFunction(n.preventDefault)&&n.preventDefault(),r===!0&&e.isFunction(n.stopPropagation)&&n.stopPropagation()),!1},window.keys={"?":0,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,space_bar:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window_key:91,right_window_key:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,"numpad 4":100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,";":186,"=":187,equal_sign:187,comma:188,",":188,dash:189,".":190,period:190,forward_slash:191,"/":191,grave_accent:192,open_bracket:219,back_slash:220,"\\":220,close_braket:221,single_quote:222},window.keyFromCode=function(n){var r="?";return n?(e.each(window.keys,function(e,t){return n===t?(r=e,!1):!0}),r):r},window.isChar=function(e){return e===window.keys.space_bar||e>window.keys["0"]&&window.keys.z>=e}}(jQuery),function(e){"use strict";var n=!1,r=function(e){return e===!0||e===!1?n=e:"!"===e&&(n=!n),n},t=[],o=function(r){if(n){if(!r)return this;r.args&&!e.isArray(r.args)&&(r.args=[r.args]);var o={args:r.args||arguments,fx:r.fx||"warn",me:r.me||"App"},i=e.type(o.args[0]);("string"===i||"number"===i||"boolean"==i)&&(o.args[0]="["+o.me+"] "+o.args[0]),window.console&&(e.isFunction(console[o.fx])||(o.fx="log"),window.console[o.fx].apply?window.console[o.fx].apply(window.console,o.args):e.each(o.args,function(e,n){window.console[o.fx](n)})),t.push(o)}return this};window.App=e.extend(window.App,{debug:r,log:o,logs:function(){return t}})}(jQuery),function(e){"use strict";var n=function(n,r){try{if(e.isFunction(n))return n.apply(this,r||[])}catch(t){var o=App.debug()&&t.stack,i=(t.message||t)+(o||"");App.log({args:[i,t],fx:"error"})}return null};window.App&&e.isFunction(window.App.debug)?window.App=e.extend(window.App,{callback:n}):window.alert("App-debug is needed for App-callback")}(jQuery),function(e){"use strict";var n=[],r=!1,t=null,o=function(e){return!!t&&t===e},i=function(r){var t=-1;return e.each(n,function(e,n){return n.url===r?(t=e,!1):!0}),t},a=function(){n.length?s():r=!1},s=function(){var r=n.shift(),o=e.extend({},r,{success:function(){t=null,a(),App.callback.call(this,r.success,arguments)},error:function(){var e=r.vip?2:1;t=null,App.log({args:["Error loading url %s",r.url],me:"Loader"}),r.priority+=++r.retries,r.retries<=r.maxRetries*e&&c(r),a(),App.callback.call(this,r.error,arguments)}});e.ajax(o),t=o.url},u=function(r,t){e.isPlainObject(r)||(r={url:r}),e.isNumeric(t)&&Math.abs(t)<n.length&&(r.priority=t),(!e.isNumeric(r.priority)||Math.abs(r.priority)>n.length)&&(r.priority=n.length),e.isNumeric(r.retries)||(r.retries=0),e.isNumeric(r.maxRetries)||(r.maxRetries=2)},c=function(e,r){if(!e)return App.log({args:"No url given",me:"Loader"}),this;if(u(e,r),o(e.url))return App.log({args:["Url %s is already loading",e.url],me:"Loader"}),this;var t=i(e.url);if(~t){var a=n[t];a.priority!=e.priority&&(n.splice(t,1),n.splice(e.priority,1,e)),App.log({args:["Url %s was shifted from %s to %s",e.url,a.priority,e.priority],me:"Loader"})}else n.splice(e.priority,1,e),App.log({args:["Url %s has been insert at %s",e.url,e.priority],me:"Loader"});return l(),this},l=function(){r||(r=!0,s(),App.log({args:"Load worker has been started",me:"Loader"}))};window.Loader=e.extend(window.Loader,{load:c,isLoading:o,inQueue:i,working:function(){return r}})}(jQuery),function(e){"use strict";var n="body",r=null,t=null,o="",i={},a={},s=function(n,r){var t=function(){return!0},o=function(e){App.callback(e)},i=function(n){var i=n,a=function(){return i.key},s=function(){return i.routes},u=function(){return!!e(this.key()).length};return e.extend({actions:e.noop,key:a,loaded:u,init:e.noop,enter:o,leave:o,canEnter:t,canLeave:t,routes:s,data:function(){return i}},r)};return i},u=function(e,n,r){var t,o=i[n];return o?!a[e.key]||r?(t=o(e),a[e.key]=t,!0):(App.log({args:["Overwriting page key %s is not allowed",e.key],fx:"error"}),undefined):(App.log({args:["Model %s not found",n],fx:"error"}),!1)},c=function(e,n,r){var t=s(e,n);return i[e]&&!r?(App.log({args:["Overwriting page model key %s is not allowed",e],fx:"error"}),!1):(i[e]=t,!0)},l=function(n,r){var t=-1,o=function(e){return t=e,!1};return n&&r&&e.each(r,function(r){var t,i=this,a=e.type(i);if("regexp"==a){if(i.test(n))return o(r)}else if("string"==a){if(n=decodeURIComponent(n),n=n.split("#")[0],i==n)return o(r);0!==i.indexOf("^")&&(i="^"+i),i.indexOf("^")!==i.length-1&&(i+="$"),i.indexOf("*")&&(i=i.replace(RegExp("\\*","g"),".*"));try{t=RegExp(i)}catch(s){App.log({args:["Error while creating RegExp %s.\n%s",i,s],fx:"error"})}if(t&&t.test(n))return o(r)}else if(i===n)return o(r);return!0}),t},p=function(n){var r=null;return b(n)&&e.each(a,function(){var e=this.routes();return~l(n,e)?(r=this,!1):undefined}),r},d={},f=function(){return{actions:e.noop,init:e.noop}},g=function(n){return e.extend(f(),n)},w=function(e,n,r){return a[e]&&!r?App.log({args:["Overwriting module key %s is not allowed",e],fx:"error"}):d[e]=g(n),d[e]},h=!1,m=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),y=function(n,r,t,o){if(n){var i=n[r];if(!e.isFunction(i)&&~r.indexOf(".")){i=n;var a=r.split(".");e.each(a,function(){return i=i[this],e.isPlainObject(i)?undefined:!1})}App.callback(i,[r,t,o])}},v=function(e,n,t){return r&&y(r.actions(),e,n,t),this},x=function(n,r,t){return e.each(d,function(){y(this.actions(),n,r,t)}),this},b=function(e){var n=!1;return e?n=!0:App.log({args:"No route set.",fx:"error"}),n},A=function(){return h&&App.log({args:"Mediator is busy waiting for a page load.",fx:"error"}),!h},k=function(e){var n=!0;return e||(n=!1),n},_=function(e){var n=!0;return e.canEnter()||(App.log("Cannot enter page %s.",e.key()),n=!1),n},L=function(){var e=!1;return r?r.canLeave()?e=!0:App.log("Cannot leave page %s.",r.key()):App.log({args:"No current page set.",fx:"error"}),e},P=function(e,n,r){return v(e,n,r),x(e,n,r),this},Q=function(i){var a,s="",u=function(){var e=r,n=function(){t=e,o=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),e=null,x("page.leave",{page:t})},i=function(){r=a,x("page.enter",{page:a,route:s}),h=!1},u={currentPage:r,nextPage:a,leaveCurrent:n,enterNext:i,route:s,isHandled:!1};r=null,x("pages.requestPageTransition",u),u.isHandled||(x("page.leaving",{page:e}),e.leave(n),x("page.entering",{page:a,route:s}),a.enter(i))},c=function(r){var t=e(r).find(a.key());if(t.length){var o=e(n);o.append(t.css({opacity:0})),a.init(),t.hide(),x("pages.loaded",{elem:o}),u()}else App.log({args:['Could not find "%s" in xhr data.',a.key()],fx:"error"})};return"string"===e.type(i)?L()&&A()&&(a=p(i),s=i):a=i,k(a)?_(a)&&(a===r&&m===s.substring(0,m.length)?(App.log("next page is the current one"),x("pages.navigateToCurrent",{page:a,route:s})):(h=!0,a.loaded()?u():(x("pages.loading"),Loader.load({url:i,priority:0,vip:!0,success:c,error:function(){x("pages.loaderror")}})))):App.log({args:['Route "%s" was not found.',i],fx:"error"}),this},j=function(e){if(r&&A()){var n=p(e);k(n)&&_(n)&&(n!==r?Q(e):Q(o))}return this},D=function(o){o&&e(o).length&&(n=o),e.each(d,function(){this.init()}),e.each(a,function(){this.loaded()&&(this.init(),~l(m,this.routes())&&(r=this,t=this,x("page.entering",{page:r,route:m}),r.enter(function(){x("page.enter",{page:r,route:m})})))})},I=function(e){return D(e),App};window.App=e.extend(window.App,{root:function(){return n},run:I,mediator:{notify:P,"goto":Q,toggle:j},pages:{_matchRoute:l,getPageForRoute:p,page:function(e){var n=a[e];return n||(n=p(e)),n},create:u,exports:c,notify:v},modules:{exports:w,notify:x}})}(jQuery);
//@ sourceMappingURL=framework.map