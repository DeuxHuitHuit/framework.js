(function(e){"use strict";var r=function(r,n){try{if(e.isFunction(r))return r.apply(this,n||[])}catch(t){if(window.App&&e.isFunction(window.App.debug)){var o=App.debug()&&t.stack,i=(t.message||t)+(o||"");App.log({args:[i,t],fx:"error"})}else window.alert(t.message||t)}return null};window.App=e.extend(window.App,{callback:r})})(jQuery),function(e){"use strict";var r=!1,n=function(e){return e===!0||e===!1?r=e:"!"===e&&(r=!r),r},t=[],o=function(n){if(r){if(!n)return this;n.args&&!e.isArray(n.args)&&(n.args=[n.args]);var o={args:n.args||arguments,fx:n.fx||"warn",me:n.me||"App"},i=e.type(o.args[0]);("string"===i||"number"===i||"boolean"==i)&&(o.args[0]="["+o.me+"] "+o.args[0]),window.console&&(e.isFunction(console[o.fx])||(o.fx="log"),window.console[o.fx].apply?window.console[o.fx].apply(window.console,o.args):e.each(o.args,function(e,r){window.console[o.fx](r)})),t.push(o)}return this};window.App=e.extend(window.App,{debug:n,log:o,logs:function(){return t}})}(jQuery),function(e){"use strict";var r="body",n=null,t=null,o="",i={},a={},s=function(r,n){var t=function(){return!0},o=function(e){App.callback(e)},i=function(r){var i=r,a=function(){return i.key},s=function(){return i.routes},u=function(){return!!e(this.key()).length};return e.extend({actions:e.noop,key:a,loaded:u,init:e.noop,enter:o,leave:o,canEnter:t,canLeave:t,routes:s,data:function(){return i}},n)};return i},u=function(e,r,n){var t,o=i[r];return o?!a[e.key]||n?(t=o(e),a[e.key]=t,!0):(App.log({args:["Overwriting page key %s is not allowed",e.key],fx:"error"}),undefined):(App.log({args:["Model %s not found",r],fx:"error"}),!1)},c=function(e,r,n){var t=s(e,r);return i[e]&&!n?(App.log({args:["Overwriting page model key %s is not allowed",e],fx:"error"}),!1):(i[e]=t,!0)},l=function(r,n){var t=-1,o=function(e){return t=e,!1};return r&&n&&e.each(n,function(n){var t,i=this,a=e.type(i);if("regexp"==a){if(i.test(r))return o(n)}else if("string"==a){if(r=decodeURIComponent(r),r=r.split("#")[0],i==r)return o(n);0!==i.indexOf("^")&&(i="^"+i),i.indexOf("^")!==i.length-1&&(i+="$"),i.indexOf("*")&&(i=i.replace(RegExp("\\*","g"),".*"));try{t=RegExp(i)}catch(s){App.log({args:["Error while creating RegExp %s.\n%s",i,s],fx:"error"})}if(t&&t.test(r))return o(n)}else if(i===r)return o(n);return!0}),t},p=function(r){var n=null;return b(r)&&e.each(a,function(){var e=this.routes();return~l(r,e)?(n=this,!1):undefined}),n},d={},f=function(){return{actions:e.noop,init:e.noop}},g=function(r){return e.extend(f(),r)},w=function(e,r,n){return a[e]&&!n?App.log({args:["Overwriting module key %s is not allowed",e],fx:"error"}):d[e]=g(r),d[e]},h=!1,m=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),y=function(r,n,t,o){if(r){var i=r[n];if(!e.isFunction(i)&&~n.indexOf(".")){i=r;var a=n.split(".");e.each(a,function(){return i=i[this],e.isPlainObject(i)?undefined:!1})}App.callback(i,[n,t,o])}},v=function(e,r,t){return n&&y(n.actions(),e,r,t),this},x=function(r,n,t){return e.each(d,function(){y(this.actions(),r,n,t)}),this},b=function(e){var r=!1;return e?r=!0:App.log({args:"No route set.",fx:"error"}),r},A=function(){return h&&App.log({args:"Mediator is busy waiting for a page load.",fx:"error"}),!h},k=function(e){var r=!0;return e||(r=!1),r},_=function(e){var r=!0;return e.canEnter()||(App.log("Cannot enter page %s.",e.key()),r=!1),r},P=function(){var e=!1;return n?n.canLeave()?e=!0:App.log("Cannot leave page %s.",n.key()):App.log({args:"No current page set.",fx:"error"}),e},L=function(e,r,n){return v(e,r,n),x(e,r,n),this},Q=function(i){var a,s="",u=function(){var e=n,r=function(){t=e,o=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),e=null,x("page.leave",{page:t})},i=function(){n=a,x("page.enter",{page:a,route:s}),h=!1},u={currentPage:n,nextPage:a,leaveCurrent:r,enterNext:i,route:s,isHandled:!1};n=null,x("pages.requestPageTransition",u),u.isHandled||(x("page.leaving",{page:e}),e.leave(r),x("page.entering",{page:a,route:s}),a.enter(i))},c=function(n){var t=e(n).find(a.key());if(t.length){var o=e(r);o.append(t.css({opacity:0})),a.init(),t.hide(),x("pages.loaded",{elem:o,data:n,url:i}),u()}else App.log({args:['Could not find "%s" in xhr data.',a.key()],fx:"error"})};return"string"===e.type(i)?P()&&A()&&(a=p(i),s=i):a=i,k(a)?_(a)&&(a===n?(App.log("next page is the current one"),x("pages.navigateToCurrent",{page:a,route:s})):(h=!0,a.loaded()?u():(x("pages.loading"),Loader.load({url:i,priority:0,vip:!0,success:c,error:function(){x("pages.loaderror")}})))):App.log({args:['Route "%s" was not found.',i],fx:"error"}),this},j=function(e){if(n&&A()){var r=p(e);k(r)&&_(r)&&(r!==n?Q(e):""!==o?Q(o):x("page.toggleNoPreviousUrl"))}return this},D=function(o){o&&e(o).length&&(r=o),e.each(d,function(){this.init()}),e.each(a,function(){this.loaded()&&(this.init({firstTime:!0}),~l(m,this.routes())&&(n=this,t=this,x("page.entering",{page:n,route:m}),n.enter(function(){x("page.enter",{page:n,route:m})})))})},I=function(e){return D(e),App};window.App=e.extend(window.App,{root:function(){return r},run:I,mediator:{notify:L,"goto":Q,toggle:j},pages:{_matchRoute:l,getPageForRoute:p,page:function(e){var r=a[e];return r||(r=p(e)),r},create:u,exports:c,notify:v},modules:{exports:w,notify:x}})}(jQuery),function(e,r){"use strict";var n=function(){var e=/\+/g,n=/([^&=]+)=?([^&]*)/g,t=function(r){return decodeURIComponent(r.replace(e," "))},o=function(e){var o,i,a={};for(""===e||e||(e=r.location.search),i=e.substring(1);o=n.exec(i);)a[t(o[1])]=t(o[2]);return a};return{parse:o}},t=function(){var e=function(e){return""===e||e||(e=navigator.userAgent),e};return{isIos:function(e){return r.BrowserDetector.isIphone(e)||r.BrowserDetector.isIpad(e)},isIphone:function(r){return r=e(r),!(!r.match(/iPhone/i)&&!r.match(/iPod/i))},isIpad:function(r){return r=e(r),!!r.match(/iPad/i)},isAndroid:function(r){return r=e(r),!!r.match(/Android/i)},isOtherMobile:function(r){return r=e(r),!(!r.match(/mobile/i)&&!r.match(/phone/i))},isMobile:function(e){return r.BrowserDetector.isIos(e)||r.BrowserDetector.isAndroid(e)||r.BrowserDetector.isOtherMobile(e)},isMsie:function(r){return r=e(r),!!r.match(/msie/i)}}};window.QueryStringParser=n(),window.QS=r.QueryStringParser.parse(),window.BrowserDetector=t(),e.iphone=r.BrowserDetector.isIphone(),e.ipad=r.BrowserDetector.isIpad(),e.ios=r.BrowserDetector.isIos(),e.mobile=r.BrowserDetector.isMobile()}(jQuery,window),function(e){"use strict";e.mobile&&e("html").addClass("mobile"),e.easing.def=e.mobile?"linear":"easeOutQuad"}(jQuery),function(e){"use strict";window.console||(window.console={},window.console.log=window.console.warn=window.console.error=window.console.info=window.console.dir=window.console.time=window.console.timeEnd=e.noop)}(jQuery),function(e){"use strict";var r=function(e){return("0"+parseInt(e,10).toString(16)).slice(-2)};window.rgb2hex=function(e){var n=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return n?r(n[1])+r(n[2])+r(n[3]):e},window.pd=function(r,n){return r&&(e.isFunction(r.preventDefault)&&r.preventDefault(),n===!0&&e.isFunction(r.stopPropagation)&&r.stopPropagation()),!1},window.keys={"?":0,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,space_bar:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window_key:91,right_window_key:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,"numpad 4":100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,";":186,"=":187,equal_sign:187,comma:188,",":188,dash:189,".":190,period:190,forward_slash:191,"/":191,grave_accent:192,open_bracket:219,back_slash:220,"\\":220,close_braket:221,single_quote:222},window.keyFromCode=function(r){var n="?";return r?(e.each(window.keys,function(e,t){return r===t?(n=e,!1):!0}),n):n},window.isChar=function(e){return e===window.keys.space_bar||e>window.keys["0"]&&window.keys.z>=e}}(jQuery),function(e){"use strict";var r=[],n=!1,t=null,o=function(e){return!!t&&t===e},i=function(n){var t=-1;return e.each(r,function(e,r){return r.url===n?(t=e,!1):!0}),t},a=function(){r.length?s():n=!1},s=function(){var n=r.shift(),o=e.extend({},n,{success:function(){t=null,a(),App.callback.call(this,n.success,arguments)},error:function(){var e=n.vip?2:1;t=null,App.log({args:["Error loading url %s",n.url],me:"Loader"}),n.priority+=++n.retries,n.retries<=n.maxRetries*e&&c(n),a(),App.callback.call(this,n.error,arguments)}});e.ajax(o),t=o.url},u=function(n,t){e.isPlainObject(n)||(n={url:n}),e.isNumeric(t)&&Math.abs(t)<r.length&&(n.priority=t),(!e.isNumeric(n.priority)||Math.abs(n.priority)>r.length)&&(n.priority=r.length),e.isNumeric(n.retries)||(n.retries=0),e.isNumeric(n.maxRetries)||(n.maxRetries=2)},c=function(e,n){if(!e)return App.log({args:"No url given",me:"Loader"}),this;if(u(e,n),o(e.url))return App.log({args:["Url %s is already loading",e.url],me:"Loader"}),this;var t=i(e.url);if(~t){var a=r[t];a.priority!=e.priority&&(r.splice(t,1),r.splice(e.priority,1,e)),App.log({args:["Url %s was shifted from %s to %s",e.url,a.priority,e.priority],me:"Loader"})}else r.splice(e.priority,1,e),App.log({args:["Url %s has been insert at %s",e.url,e.priority],me:"Loader"});return l(),this},l=function(){n||(n=!0,s(),App.log({args:"Load worker has been started",me:"Loader"}))};window.Loader=e.extend(window.Loader,{load:c,isLoading:o,inQueue:i,working:function(){return n}})}(jQuery);
//@ sourceMappingURL=framework.map