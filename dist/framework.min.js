(function(e,r){"use strict";var n=function(n,t){try{if(e.isFunction(n))return n.apply(this,t||[])}catch(o){if(r.App&&e.isFunction(r.App.debug)){var i=App.debug()&&o.stack,a=(o.message||o)+(i||"");App.log({args:[a,o],fx:"error"})}else window.alert(o.message||o)}return null};r.App=e.extend(r.App,{callback:n})})(jQuery,window),function(e,r){"use strict";var n={},t=function(){return{init:e.noop}},o=function(r){return e.extend(t(),r)},i=function(e,r,t){return n[e]&&!t?App.log({args:["Overwriting component key %s is not allowed",e],fx:"error"}):n[e]=o(r),n[e]},a=function(e,r){n[e]||App.log({args:["Component %s is not found",e],fx:"error"});var t=n[e];return t.call(t,r)};r.App=e.extend(r.App,{components:{models:function(){return n},create:a,exports:i}})}(jQuery,window),function(e,r){"use strict";var n=!1,t=function(e){return e===!0||e===!1?n=e:"!"===e&&(n=!n),n},o=[],i=function(r){if(n){if(!r)return this;r.args&&!e.isArray(r.args)&&(r.args=[r.args]);var t={args:r.args||arguments,fx:r.fx||"warn",me:r.me||"App"},i=e.type(t.args[0]);("string"===i||"number"===i||"boolean"==i)&&(t.args[0]="["+t.me+"] "+t.args[0]),window.console&&(e.isFunction(console[t.fx])||(t.fx="log"),window.console[t.fx].apply?window.console[t.fx].apply(window.console,t.args):e.each(t.args,function(e,r){window.console[t.fx](r)})),o.push(t)}return this};r.App=e.extend(r.App,{debug:t,log:i,logs:function(){return o}})}(jQuery,window),function(e,r){"use strict";var n={},t=function(){return{actions:e.noop,init:e.noop}},o=function(r){return e.extend(t(),r)},i=function(e,r,t){return n[e]&&!t?App.log({args:["Overwriting module key %s is not allowed",e],fx:"error"}):n[e]=o(r),n[e]},a=function(r,t,o){return e.each(n,function(){App._callAction(this.actions(),r,t,o)}),this};r.App=e.extend(r.App,{modules:{models:function(){return n},exports:i,notify:a}})}(jQuery,window),function(e,r){"use strict";var n={},t={},o=function(r,n){var t=function(){return!0},o=function(e){App.callback(e)},i=function(r){var i=r,a=function(){return i.key},u=function(){return i.routes},s=function(){return!!e(this.key()).length};return e.extend({actions:e.noop,key:a,loaded:s,init:e.noop,enter:o,leave:o,canEnter:t,canLeave:t,routes:u,data:function(){return i}},n)};return i},i=function(e,r,o){var i,a=n[r];return a?!t[e.key]||o?(i=a(e),t[e.key]=i,!0):(App.log({args:["Overwriting page key %s is not allowed",e.key],fx:"error"}),undefined):(App.log({args:["Model %s not found",r],fx:"error"}),!1)},a=function(e,r,t){var i=o(e,r);return n[e]&&!t?(App.log({args:["Overwriting page model key %s is not allowed",e],fx:"error"}),!1):(n[e]=i,!0)},u=function(e){var r=!1;return e?r=!0:App.log({args:"No route set.",fx:"error"}),r},s=function(r,n){var t=-1,o=function(e){return t=e,!1};return r&&n&&e.each(n,function(n){var t,i=this,a=e.type(i);if("regexp"==a){if(i.test(r))return o(n)}else if("string"==a){if(r=decodeURIComponent(r),r=r.split("#")[0],i==r)return o(n);0!==i.indexOf("^")&&(i="^"+i),i.indexOf("^")!==i.length-1&&(i+="$"),i.indexOf("*")&&(i=i.replace(RegExp("\\*","g"),".*"));try{t=RegExp(i)}catch(u){App.log({args:["Error while creating RegExp %s.\n%s",i,u],fx:"error"})}if(t&&t.test(r))return o(n)}else if(i===r)return o(n);return!0}),t},p=function(r){var n=null;return u(r)&&e.each(t,function(){var e=this.routes();return~s(r,e)?(n=this,!1):undefined}),n},c=function(){App.log({args:"This method is deprecated in favor of App.mediator.notifyCurrentPage",fx:"error"})};r.App=e.extend(r.App,{pages:{_matchRoute:s,_validateRoute:u,instances:function(e){return e?t[e]:t},getPageForRoute:p,page:function(e){var r=t[e];return r||(r=p(e)),r},create:i,exports:a,notify:c}})}(jQuery,window),function(e,r){"use strict";var n="body",t=!1,o=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),i=null,a=null,u="",s=function(r,n,t,o){if(r){var i=r[n];if(!e.isFunction(i)&&~n.indexOf(".")){i=r;var a=n.split(".");e.each(a,function(){return i=i[this],e.isPlainObject(i)?undefined:!1})}App.callback(i,[n,t,o])}},p=function(e,r,n){return i&&App._callAction(i.actions(),e,r,n),this},c=function(){return t&&App.log({args:"Mediator is busy waiting for a page load.",fx:"error"}),!t},l=function(e){var r=!0;return e||(r=!1),r},f=function(e){var r=!0;return e.canEnter()||(App.log("Cannot enter page %s.",e.key()),r=!1),r},d=function(){var e=!1;return i?i.canLeave()?e=!0:App.log("Cannot leave page %s.",i.key()):App.log({args:"No current page set.",fx:"error"}),e},g=function(e,r,n){return p(e,r,n),App.modules.notify(e,r,n),this},m=function(r){var o,a="",s=function(){var e=i,r=function(){App.pages.previous(e),u=document.location.href.substring(document.location.protocol.length+2+document.location.host.length),e=null,App.modules.notify("page.leave",{page:App.pages.previous()})},n=function(){i=o,App.modules.notify("page.enter",{page:o,route:a}),t=!1},s={currentPage:i,nextPage:o,leaveCurrent:r,enterNext:n,route:a,isHandled:!1};i=null,App.modules.notify("pages.requestPageTransition",s),s.isHandled||(App.modules.notify("page.leaving",{page:e}),e.leave(r),App.modules.notify("page.entering",{page:o,route:a}),o.enter(n))},p=function(t){var i=e(t).find(o.key());if(i.length){var a=e(n);a.append(i.css({opacity:0})),o.init(),i.hide(),App.modules.notify("pages.loaded",{elem:a,data:t,url:r}),s()}else App.log({args:['Could not find "%s" in xhr data.',o.key()],fx:"error"})};return"string"===e.type(r)?d()&&c()&&(o=App.pages.getPageForRoute(r),a=r):o=r,l(o)?f(o)&&(o===i?(App.log("next page is the current one"),App.modules.notify("pages.navigateToCurrent",{page:o,route:a})):(t=!0,o.loaded()?s():(App.modules.notify("pages.loading"),Loader.load({url:r,priority:0,vip:!0,success:p,error:function(){App.modules.notify("pages.loaderror")}})))):App.log({args:['Route "%s" was not found.',r],fx:"error"}),this},h=function(e){if(i&&c()){var r=App.pages.getPageForRoute(e);l(r)&&f(r)&&(r!==i?m(e):u?m(u):App.modules.notify("page.toggleNoPreviousUrl",{currentPage:r}))}return this},w=function(r){r&&e(r).length&&(n=r),e.each(App.modules.models(),function(){this.init()}),e.each(App.pages.instances(),function(){this.loaded()&&(this.init({firstTime:!0}),~App.pages._matchRoute(o,this.routes())&&(i=this,a=this,App.modules.notify("page.entering",{page:i,route:o}),i.enter(function(){App.modules.notify("page.enter",{page:i,route:o})})))})},y=function(e){return w(e),App};r.App=e.extend(r.App,{_callAction:s,root:function(){return n},run:y,mediator:{notify:g,notifyCurrentPage:p,"goto":m,toggle:h}})}(jQuery,window),function(e,r){"use strict";var n=function(){var e=/\+/g,r=/([^&=]+)=?([^&]*)/g,n=function(r){return decodeURIComponent(r.replace(e," "))},t=function(e){var t,o,i={};for(""===e||e||(e=window.location.search),o=e.substring(1);t=r.exec(o);)i[n(t[1])]=n(t[2]);return i};return{parse:t}},t=function(){var e=function(e){return""===e||e||(e=navigator.userAgent),e};return{isIos:function(e){return window.BrowserDetector.isIphone(e)||window.BrowserDetector.isIpad(e)},isIphone:function(r){return r=e(r),!(!r.match(/iPhone/i)&&!r.match(/iPod/i))},isIpad:function(r){return r=e(r),!!r.match(/iPad/i)},isAndroid:function(r){return r=e(r),!!r.match(/Android/i)},isOtherMobile:function(r){return r=e(r),!(!r.match(/mobile/i)&&!r.match(/phone/i))},isMobile:function(e){return window.BrowserDetector.isIos(e)||window.BrowserDetector.isAndroid(e)||window.BrowserDetector.isOtherMobile(e)},isMsie:function(r){return r=e(r),r.match(/msie/gi)||r.match(/trident/gi)}}};r.QueryStringParser=n(),r.QS=r.QueryStringParser.parse(),r.BrowserDetector=t(),e.iphone=r.BrowserDetector.isIphone(),e.ipad=r.BrowserDetector.isIpad(),e.ios=r.BrowserDetector.isIos(),e.mobile=r.BrowserDetector.isMobile(),e.mobile&&e("html").addClass("mobile"),e.easing.def=e.mobile?"linear":"easeOutQuad";var o=["assert","clear","count","debug","dir","dirxml","error","group","group","group","info","log","profile","profile","time","time","time","trace","warn"];window.console||(window.console={}),e.each(o,function(r,n){window.console[n]=window.console[n]||e.noop});var i=function(e){return("0"+parseInt(e,10).toString(16)).slice(-2)};r.rgb2hex=function(e){var r=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return r?i(r[1])+i(r[2])+i(r[3]):e},r.pd=function(r,n){return r&&(e.isFunction(r.preventDefault)&&r.preventDefault(),n===!0&&e.isFunction(r.stopPropagation)&&r.stopPropagation()),!1},r.keys={"?":0,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,space_bar:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window_key:91,right_window_key:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,"numpad 4":100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,";":186,"=":187,equal_sign:187,comma:188,",":188,dash:189,".":190,period:190,forward_slash:191,"/":191,grave_accent:192,open_bracket:219,back_slash:220,"\\":220,close_braket:221,single_quote:222},r.keyFromCode=function(r){var n="?";return r?(e.each(window.keys,function(e,t){return r===t?(n=e,!1):!0}),n):n},r.isChar=function(e){return e===window.keys.space_bar||e>window.keys["0"]&&window.keys.z>=e}}(jQuery,window),function(e,r){"use strict";var n=[],t=!1,o=null,i=function(e){return!!o&&o===e},a=function(r){var t=-1;return e.each(n,function(e,n){return n.url===r?(t=e,!1):!0}),t},u=function(){n.length?s():t=!1},s=function(){var r=n.shift(),t=e.extend({},r,{success:function(){o=null,u(),App.callback.call(this,r.success,arguments)},error:function(){var e=r.vip?2:1;o=null,App.log({args:["Error loading url %s",r.url],me:"Loader"}),r.priority+=++r.retries,r.retries<=r.maxRetries*e&&c(r),u(),App.callback.call(this,r.error,arguments)}});e.ajax(t),o=t.url},p=function(r,t){e.isPlainObject(r)||(r={url:r}),e.isNumeric(t)&&Math.abs(t)<n.length&&(r.priority=t),(!e.isNumeric(r.priority)||Math.abs(r.priority)>n.length)&&(r.priority=n.length),e.isNumeric(r.retries)||(r.retries=0),e.isNumeric(r.maxRetries)||(r.maxRetries=2)},c=function(e,r){if(!e)return App.log({args:"No url given",me:"Loader"}),this;if(p(e,r),i(e.url))return App.log({args:["Url %s is already loading",e.url],me:"Loader"}),this;var t=a(e.url);if(~t){var o=n[t];o.priority!=e.priority&&(n.splice(t,1),n.splice(e.priority,1,e)),App.log({args:["Url %s was shifted from %s to %s",e.url,o.priority,e.priority],me:"Loader"})}else n.splice(e.priority,1,e),App.log({args:["Url %s has been insert at %s",e.url,e.priority],me:"Loader"});return l(),this},l=function(){t||(t=!0,s(),App.log({args:"Load worker has been started",me:"Loader"}))};r.Loader=e.extend(r.Loader,{load:c,isLoading:i,inQueue:a,working:function(){return t}})}(jQuery,window);
//@ sourceMappingURL=framework.map